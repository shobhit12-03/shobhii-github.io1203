#include <stdio.h>

struct Student
{
    int roll;
    char name[50];
    int marks1, marks2, marks3;
};

int totalMarks(struct Student student)
{
    return student.marks1 + student.marks2 + student.marks3;
}

float averageMarks(struct Student student)
{
    return totalMarks(student) / 3.0;
}

char grade(float average)
{
    if (average >= 85)
    {
        return 'A';
    }
    else if (average >= 70)
    {
        return 'B';
    }
    else if (average >= 50)
    {
        return 'C';
    }
    else if (average >= 35)
    {
        return 'D';
    }
    else
    {
        return 'F';
    }
}

void performanceRating(char grade)
{
    int stars = 0;
    switch (grade)
    {
    case 'A':
        stars = 5;
        break;
    case 'B':
        stars = 4;
        break;
    case 'C':
        stars = 3;
        break;
    case 'D':
        stars = 2;
        break;
    default:
        stars = 0;
    }
    for (int i = 0; i < stars; i++)
    {
        printf("*");
    }
}

void printRollNumbers(struct Student students[], int totalStudents, int index)
{
    if (index == totalStudents)
        return;

    printf("%d ", students[index].roll);
    printRollNumbers(students, totalStudents, index + 1);
}

void inputStudents(struct Student students[], int totalStudents)
{
    printf("Enter details: Roll Name Marks1 Marks2 Marks3\n");
    for (int i = 0; i < totalStudents; i++)
    {
        scanf("%d %s %d %d %d", 
              &students[i].roll, 
              students[i].name, 
              &students[i].marks1, 
              &students[i].marks2, 
              &students[i].marks3);
    }
}

void displayReport(struct Student students[], int totalStudents)
{
    printf("\n--- Student Performance Report ---\n");
    for (int i = 0; i < totalStudents; i++)
    {
        int total = totalMarks(students[i]);
        float average = averageMarks(students[i]);
        char gradeLetter = grade(average);

        printf("\nRoll: %d", students[i].roll);
        printf("\nName: %s", students[i].name);
        printf("\nTotal: %d", total);
        printf("\nAverage: %.2f", average);
        printf("\nGrade: %c", gradeLetter);

        if (average < 35)
        {
            continue;
        }

        printf("\nPerformance: ");
        performanceRating(gradeLetter);
        printf("\n");
    }
}

int main()
{
    int totalStudents;
    printf("Enter number of students: ");
    scanf("%d", &totalStudents);

    struct Student students[totalStudents];

    inputStudents(students, totalStudents);
    displayReport(students, totalStudents);

    printf("\nList of Roll Numbers (via recursion): ");
    printRollNumbers(students, totalStudents, 0);
    printf("\n");

    return 0;
}
